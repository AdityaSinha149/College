## Lab-5 INTRODUCTION TO FLEX  
- Name - Aditya Sinha
- Reg.No - 230905218
- CSE-A-27

Q) Count the number of vowels and consonants in the given input. 
```flex
%{
int vowels = 0, consonants = 0;
%}

%%
[aeiouAEIOU] { vowels++; }
[a-zA-Z] { consonants++; }
. { }
%%

int yywrap() { return 1; }

int main() {
    char stat[100];

    printf("Enter the string: ");
    scanf("%s", stat);

    yy_scan_string(stat);
    yylex();

    printf("Vowels = %d\n", vowels);
    printf("Consonants = %d\n", consonants);

    return 0;
}
```
Output :
```bash
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ flex -o q1.c q1.l
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ gcc q1.c -o q1
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ ./q1
Enter the string: aeiouhjklahejik1h462i82
Vowels = 9
Consonants = 8
```

Q) Count the number of words, characters, blanks and lines in a given text.  
```flex
%{
#include <stdio.h>
int words = 0, chars = 0, blanks = 0, lines = 0;
%}

%%
[a-zA-Z]+        { words++; chars += yyleng; }
[ \t\r\f\v]+     { blanks += yyleng; chars += yyleng; }
\n               { lines++; chars++; }
\"               { return 0; }
.                { chars++; }
%%

int yywrap() { return 1; }

int main() {
    printf("Enter input (you can type multiple lines, end with \"):\n");
    yylex();

    printf("\nWords      = %d\n", words);
    printf("Characters = %d\n", chars);
    printf("Blanks     = %d\n", blanks);
    printf("Lines      = %d\n", lines);

    return 0;
}
```

Output :
```bash
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ ./q2
Enter input (you can type multiple lines, end with "):
hellow
world
i am
"

Words      = 4
Characters = 18
Blanks     = 1
Lines      = 3
```

Q) Find the number of positive integer, negative integer, positive floating positive number and negative 
floating point number  
```flex
%{
#include <stdio.h>

int pos_int = 0;
int neg_int = 0;
int pos_float = 0;
int neg_float = 0;
%}

%%
-[0-9]+\.[0-9]+     { neg_float++; }
[0-9]+\.[0-9]+      { pos_float++; }
-[1-9][0-9]*        { neg_int++; }
[1-9][0-9]*         { pos_int++; }
[ \t\n]+            { }
.                   { }
%%

int yywrap() { return 1; }

int main() {
    printf("Enter numbers (Ctrl+D to end):\n");
    yylex();

    printf("Positive Integers        = %d\n", pos_int);
    printf("Negative Integers        = %d\n", neg_int);
    printf("Positive Floating Point  = %d\n", pos_float);
    printf("Negative Floating Point  = %d\n", neg_float);

    return 0;
}
```

Output :
```bash
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ ./q3
Enter numbers (Ctrl+D to end):
1 2 -8 -4 -3.8 9 -9.3 2               
Positive Integers        = 4
Negative Integers        = 2
Positive Floating Point  = 0
Negative Floating Point  = 2
```

Q) Given a input C file, replace all scanf with READ and printf with WRITE statements also find the number 
of scanf and printf in the file.  
```flex
%{
int scanf_count = 0;
int printf_count = 0;

FILE *out;
%}

%%
"scanf"     { fprintf(out, "READ");  scanf_count++; }
"printf"    { fprintf(out, "WRITE"); printf_count++; }
.|\n        { fprintf(out, "%s", yytext); }
%%

int yywrap() { return 1; }

int main(int argc, char *argv[]) {

    if (argc != 2) {
        printf("Usage: %s <input_file.c>\n", argv[0]);
        return 1;
    }

    yyin = fopen(argv[1], "r");
    if (!yyin) {
        perror("Input file error");
        return 1;
    }

    out = fopen("ans.txt", "w");
    if (!out) {
        perror("Output file error");
        return 1;
    }

    yylex();

    printf("\n\nNumber of scanf  = %d\n", scanf_count);
    printf("Number of printf = %d\n", printf_count);

    fclose(yyin);
    fclose(out);
    return 0;
}
```
Input file :
```txt
#include <stdio.h>
#include <stdlib.h>
#define PI 44e-5


int ahbs;
char func1(int ch, char* s){
    int c = 0;
    int x = 9;
    return 4;
}

int main(){
                     if(PI) printf("Nothing here\n");
                     int a = 5;
                     char b = 7;
                     int v,k;
                    scanf("%d", &v);
                     //bcsjhkdvbdsjkh
                     /*vhjskdvk
                     bdsfhgbdf
                     bdfgbnfgdn*/
    printf          ("Demo fi                 le\n");
        return 0;
}
```

Output :
```bash
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ ./q4 file.c


Number of scanf  = 1
Number of printf = 2
```

Output file :
```txt
#include <stdio.h>
#include <stdlib.h>
#define PI 44e-5


int ahbs;
char func1(int ch, char* s){
    int c = 0;
    int x = 9;
    return 4;
}

int main(){
                     if(PI) WRITE("Nothing here\n");
                     int a = 5;
                     char b = 7;
                     int v,k;
                    READ("%d", &v);
                     //bcsjhkdvbdsjkh
                     /*vhjskdvk
                     bdsfhgbdf
                     bdfgbnfgdn*/
    WRITE          ("Demo fi                 le\n");
        return 0;
}
```
Q) That changes a number from decimal to hexadecimal notation. 
```flex
%{
#include <stdio.h>
#include <stdlib.h>
%}

%%
[0-9]+ {
            int n = atoi(yytext);
            printf("0x%X", n);
        }
%%

int yywrap() { return 1; }

int main() {
    printf("Enter input (Ctrl+D to end):\n");
    yylex();
    return 0;
}
```
Output :
```bash
CD_A1@CL3-25:~/Desktop/College/Sem6/CD/Lab/Lab5$ ./q5
Enter input (Ctrl+D to end):
1234
0x4D2
1786
0x6FA
```

Q) Convert uppercase characters to lowercase characters of C file excluding the characters present in the comment.
```flex
%{
#include <ctype.h>
FILE *out;
%}

%x SINGLE
%x MULTI

%%
"//"            { fprintf(out, "%s", yytext); BEGIN(SINGLE); }
"/*"            { fprintf(out, "%s", yytext); BEGIN(MULTI); }

<SINGLE>\n      { fprintf(out, "%s", yytext); BEGIN(INITIAL); }
<SINGLE>.       { fprintf(out, "%s", yytext); }

<MULTI>"*/"     { fprintf(out, "%s", yytext); BEGIN(INITIAL); }
<MULTI>.|\n     { fprintf(out, "%s", yytext); }

[A-Z]           { fprintf(out, "%c", tolower(yytext[0])); }
.|\n            { fprintf(out, "%s", yytext); }
%%

int yywrap() { return 1; }

int main(int argc, char *argv[]) {
    if (argc != 2) return 1;

    yyin = fopen(argv[1], "r");
    if (!yyin) return 1;

    out = fopen("ans.txt", "w");
    if (!out) return 1;

    yylex();

    fclose(yyin);
    fclose(out);
    return 0;
}
```
Input file :
```c
#include <stdio.h>
#include <stdlib.h>
#define PI 44e-5


int ahbs;
char func1(int ch, char* s){
    int C = 0;
    int x = 9;
    return 4;
}

int main(){
                     if(PI) printf("Nothing here\n");
                     int a = 5;
                     char b = 7;
                     int v,k;
                    scanf("%d", &v);
                     //bcsVFEDGBERTbdsjkh
                     /*vhjskdvk
                     SFGDFHDF
                     bdfgbnfgdn*/
    printf          ("Demo fi                 le\n");
        return 0;
}
```
Output :
```txt
#include <stdio.h>
#include <stdlib.h>
#define pi 44e-5


int ahbs;
char func1(int ch, char* s){
    int c = 0;
    int x = 9;
    return 4;
}

int main(){
                     if(pi) printf("nothing here\n");
                     int a = 5;
                     char b = 7;
                     int v,k;
                    scanf("%d", &v);
                     //bcsVFEDGBERTbdsjkh
                     /*vhjskdvk
                     SFGDFHDF
                     bdfgbnfgdn*/
    printf          ("demo fi                 le\n");
        return 0;
}
```